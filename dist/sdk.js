var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{u:()=>n,G:()=>a});class n extends Error{constructor(e,t,i){super(i),this.statusCode=e,this.response=t,this.name="ApiException",Object.setPrototypeOf(this,n.prototype)}toString(){return`ApiException: ${this.message} (Status code: ${this.statusCode})`}}var i=function(e,t,n,i){return new(n||(n=Promise))((function(a,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function r(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}c((i=i.apply(e,t||[])).next())}))};class a{constructor(e,t,n){this.apiBaseUrl=e,this.apiKey=t,this.fetchFunction=n}static production(e,t){return new a("https://api.beansapp.com/v4",e,null!=t?t:fetch)}static staging(e,t){return new a("https://api.staging.beansapp.com/v4",e,null!=t?t:fetch)}static custom(e,t,n){const i=e.endsWith("/")?e.slice(0,e.length-1):e;return new a(i,t,null!=n?n:fetch)}fetchStellarCurrencies(e){return i(this,void 0,void 0,(function*(){const t=`${this.apiBaseUrl}/companies/me/accounts/${e}/stellar-currencies`,i=yield this.fetchFunction(t,{headers:{"X-Beans-Company-Api-Key":this.apiKey}});if(200!==i.status)throw new n(i.status,i,"Failed to fetch stellar currencies");return yield i.json()}))}generateDeeplink(e,t,n,a,s=null,o=null){return i(this,void 0,void 0,(function*(){return yield this.generatePaymentRequest(e,{stellarCurrencyId:t,amount:n,memo:a,maxAllowedPayments:s,paymentReceivedWebHookUrl:o,deeplink:{include:!0}})}))}generatePngQrCode(e,t,n,a,s=null,o=null,r=null){return i(this,void 0,void 0,(function*(){return yield this.generatePaymentRequest(e,{stellarCurrencyId:t,amount:n,memo:a,maxAllowedPayments:s,paymentReceivedWebHookUrl:o,deeplink:{include:!0},pngQrCode:{include:!0,preferredSize:r}})}))}generateSvgQrCode(e,t,n,a,s=null,o=null,r=null){return i(this,void 0,void 0,(function*(){return yield this.generatePaymentRequest(e,{stellarCurrencyId:t,amount:n,memo:a,maxAllowedPayments:s,paymentReceivedWebHookUrl:o,deeplink:{include:!0},svgQrCode:{include:!0,size:r}})}))}generatePaymentRequest(e,t){return i(this,void 0,void 0,(function*(){const i=`${this.apiBaseUrl}/companies/me/accounts/${e}/payment-request`,a=yield this.fetchFunction(i,{method:"POST",headers:{"Content-Type":"application/json","X-Beans-Company-Api-Key":this.apiKey},body:JSON.stringify(t)});if(201!==a.status)throw new n(a.status,a,"Failed to generate payment request");return yield a.json()}))}getPaymentRequestStatus(e){return i(this,void 0,void 0,(function*(){const t=`${this.apiBaseUrl}/companies/me/payment-requests/${e}/status`,i=yield this.fetchFunction(t,{method:"GET",headers:{"Content-Type":"application/json","X-Beans-Company-Api-Key":this.apiKey}});if(200!==i.status)throw new n(i.status,i,"Failed to get payment request status");return yield i.json()}))}createCompanyAccount(e,t){return i(this,void 0,void 0,(function*(){const i=`${this.apiBaseUrl}/companies/me/account`,a=yield this.fetchFunction(i,{method:"POST",headers:{"Content-Type":"application/json","X-Beans-Company-Api-Key":this.apiKey},body:JSON.stringify({stellarAccountId:e,name:t})});if(201!==a.status)throw new n(a.status,a,"Failed to create company account");return yield a.json()}))}uploadCompanyAccountAvatar(e,t,a){return i(this,void 0,void 0,(function*(){const i=`${this.apiBaseUrl}/companies/${e}/accounts/${t}/avatar`,s=new FormData,o=a instanceof ArrayBuffer?new Blob([a]):a;s.append("image",o);const r=yield this.fetchFunction(i,{method:"PUT",headers:{"X-Beans-Company-Api-Key":this.apiKey},body:s});if(200!==r.status)throw new n(r.status,r,"Failed to upload company account avatar");return yield r.json()}))}getAvatarUrlBytes(e){return i(this,void 0,void 0,(function*(){const t=yield this.fetchFunction(e,{method:"GET",headers:{"X-Beans-Company-Api-Key":this.apiKey}});if(200!==t.status)throw new n(t.status,t,"Failed to get company account avatar");return yield t.arrayBuffer()}))}deleteCompanyAccount(e){return i(this,void 0,void 0,(function*(){const t=`${this.apiBaseUrl}/companies/me/accounts/${e}`,i=yield this.fetchFunction(t,{method:"DELETE",headers:{"Content-Type":"application/json","X-Beans-Company-Api-Key":this.apiKey}});if(200!==i.status)throw new n(i.status,i,"Failed to delete company account");return yield i.json()}))}getCompanyAccounts(){return i(this,void 0,void 0,(function*(){const e=`${this.apiBaseUrl}/companies/me/accounts`,t=yield this.fetchFunction(e,{headers:{"X-Beans-Company-Api-Key":this.apiKey}});if(200!==t.status)throw new n(t.status,t,"Failed to fetch company accounts");return yield t.json()}))}getCompanyAccount(e){return i(this,void 0,void 0,(function*(){const t=`${this.apiBaseUrl}/companies/me/accounts/${e}`,i=yield this.fetchFunction(t,{headers:{"X-Beans-Company-Api-Key":this.apiKey}});if(200!==i.status)throw new n(i.status,i,"Failed to fetch company account");return yield i.json()}))}_getMimeTypeFromExtension(e){switch(e.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";default:throw new Error(`Unsupported file extension: ${e}`)}}}var s=t.u,o=t.G;export{s as ApiException,o as BeansMerchantSdk};